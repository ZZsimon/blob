(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{413:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-actions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-actions"}},[t._v("#")]),t._v(" 1.Actions")]),t._v(" "),s("p",[t._v("持续集成由"),s("code",[t._v("很多操作")]),t._v("组成，比如"),s("em",[t._v("抓取代码")]),t._v("、"),s("em",[t._v("运行测试")]),t._v("、"),s("em",[t._v("登录远程服务器")]),t._v("，"),s("em",[t._v("发布到第三方服务")]),t._v("等等。GitHub 把"),s("code",[t._v("这些操作")]),t._v("就称为 "),s("code",[t._v("actions")]),t._v("。")]),t._v(" "),s("p",[s("strong",[t._v("很多操作在不同项目里面是类似的，完全可以共享")]),t._v("。GitHub 注意到了这一点，想出了一个很妙的点子，允许开发者把每个操作写成独立的脚本文件，存放到代码仓库，使得其他开发者可以引用。")]),t._v(" "),s("p",[t._v("如果需要某个action，直接使用别人写好的就行。整个持续集成过程，就变成了一个 "),s("strong",[t._v("actions 的组合")]),t._v("。这就是 GitHub Actions 最特别的地方。")]),t._v(" "),s("h2",{attrs:{id:"_2-action-仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-action-仓库"}},[t._v("#")]),t._v(" 2.Action 仓库")]),t._v(" "),s("p",[t._v("每个action其实就是一段脚本，这段脚本的作者就可以创建一个仓库来保存这段脚本。使用 "),s("code",[t._v("userName/repoName")]),t._v(" 的语法引用 action。")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用其他人制作的actions例子")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# userName -> JamesIves")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# repoName -> github-pages-deploy-action@v4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这个action仓库的作用就是 自动部署指定文件夹中的静态文件到github page上")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy 🚀\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" JamesIves/github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@v4\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("folder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" docs/.vuepress/dist\n")])])]),s("h2",{attrs:{id:"_3-配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置文件"}},[t._v("#")]),t._v(" 3.配置文件")]),t._v(" "),s("p",[t._v("使用GitHub Actions，需要在项目中创建 "),s("code",[t._v(".github/workflows")]),t._v(" 目录，在目录下创建 "),s("code",[t._v(".yml")]),t._v(" 格式文件。GitHub 只要发现 "),s("code",[t._v(".github/workflows")]),t._v(" 目录里面有 "),s("code",[t._v(".yml")]),t._v(" 文件，就会自动运行该文件。")]),t._v(" "),s("p",[t._v("这个文件有一套自己的语法：")]),t._v(" "),s("ul",[s("li",[t._v("workflow （工作流程）：持续集成一次运行的过程，就是一个 workflow。")]),t._v(" "),s("li",[t._v("job （任务）：一个 workflow 由一个或多个 jobs 构成，含义是一次持续集成的运行，可以完成多个任务。")]),t._v(" "),s("li",[t._v("step（步骤）：每个 job 由多个 step 构成，一步步完成。")]),t._v(" "),s("li",[t._v("action （动作）：每个 step 可以依次执行一个或多个命令（action）。")])]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name表示当前这个workflow的名称")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" GitHub Actions Build and Deploy GitHub Pages\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# on表示push动作发生的时候，就会执行当前这个 workflow")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("push"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# jobs表示当前的任务")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 当前只有一个任务 build-and-deploy，这个任务名称可以自己随便取")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-and-deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# runs-on表示依赖运行需要的虚拟机环境，这里是 ubuntu-latest")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一个job可以分为多个step，按照顺序来执行，这里有3个step")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout 🛎️\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v3\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Install and Build 🔧 \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n          npm install\n          npm run build")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy 🚀\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" JamesIves/github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@v4\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("folder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" docs/.vuepress/dist\n")])])]),s("h2",{attrs:{id:"_4-参考链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-参考链接"}},[t._v("#")]),t._v(" 4.参考链接")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("github actions教程 阮一峰"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);